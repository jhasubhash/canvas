(this.webpackJsonpcanvas=this.webpackJsonpcanvas||[]).push([[0],{121:function(e,t,a){},131:function(e,t,a){e.exports=a(316)},136:function(e,t,a){},137:function(e,t,a){},148:function(e,t,a){},316:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(29),o=a.n(i),l=(a(136),a(10)),s=a(11),c=a(23),u=a(21),h=(a(137),a(77)),d=a.n(h),f=a(118),v=a(139);function k(){return(k=Object(f.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){v().ready().then((function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var p=function(){function e(){Object(l.a)(this,e),this.canvasKit=null,this.canvas=null,this.loader=null}return Object(s.a)(e,[{key:"loadCanvasKit",value:function(e,t){var a=this;this.canvas=e,this.loader=t,function(){return k.apply(this,arguments)}().then((function(e){a.canvasKit=e,a.loader.initCanvas(a.canvasKit,a.canvas)}))}}]),e}(),m=(a(148),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).canvasRef=r.a.createRef(),n.canvasModel=new p,n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this.canvasRef.current;this.canvasModel.loadCanvasKit(e,this.props.loaderRef)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("canvas",{className:"canvas",id:"canvas",ref:this.canvasRef}))}}]),a}(r.a.Component)),S=a(318),b=a(333),y=a(12),C=a(122),g=a.n(C),E=a(125),O=a.n(E),W=a(124),L=a.n(W),w=a(128),j=a.n(w),P=a(126),K=a.n(P),M=a(123),R=a.n(M),x=a(127),V=a.n(x),N=a(32),A=a(331),D=a(334),T=Object(A.a)({root:{height:250}});function U(e){return"".concat(e)}function Y(e){var t=T(),a=r.a.useState(e.getLastStrokeWidth()),n=Object(N.a)(a,2),i=n[0],o=n[1];return r.a.useEffect((function(){return e.loader.setStrokeColor(e.getLastColor()),e.loader.setStrokeWidth(e.getLastStrokeWidth()),function(){e.setLastColor(e.loader.getStrokeColor()),e.setLastStrokeWidth(e.loader.getStrokeWidth())}}),[e]),r.a.createElement("div",{className:t.root},r.a.createElement(D.a,{defaultValue:i,orientation:"vertical",value:"number"===typeof i?i:0,onChange:function(t,a){o(a),e.loader.setStrokeWidth(a)},"aria-labelledby":"vertical-slider",getAriaValueText:U,step:.25,min:.25,max:100,valueLabelDisplay:"auto"}))}var F=Object(A.a)({root:{height:250}});function X(e){return"".concat(e)}function I(e){var t=F(),a=r.a.useState(e.getLastEraserWidth()),n=Object(N.a)(a,2),i=n[0],o=n[1],l={r:255,g:255,b:255,a:1};return r.a.useEffect((function(){return e.loader.setStrokeColor(l),e.loader.setStrokeWidth(e.getLastEraserWidth()),function(){e.setLastEraserWidth(e.loader.getStrokeWidth())}}),[e,l]),r.a.createElement("div",{className:t.root},r.a.createElement(D.a,{defaultValue:i,orientation:"vertical",value:"number"===typeof i?i:0,onChange:function(t,a){o(a),e.loader.setStrokeWidth(a)},"aria-labelledby":"vertical-slider",getAriaValueText:X,step:.25,min:.25,max:100,valueLabelDisplay:"auto"}))}var B=Object(A.a)({root:{height:250}});function H(e){return"".concat(e)}function J(e){var t=B(),a=r.a.useState(e.getLastOpacity()),n=Object(N.a)(a,2),i=n[0],o=n[1];return r.a.useEffect((function(){return e.loader.setOpacity(e.getLastOpacity()),function(){e.getLastOpacity(e.loader.getOpacity())}}),[e]),r.a.createElement("div",{className:t.root},r.a.createElement(D.a,{defaultValue:i,orientation:"vertical",value:"number"===typeof i?i:0,onChange:function(t,a){o(a),e.loader.setOpacity(a)},"aria-labelledby":"vertical-slider",getAriaValueText:H,step:.25,min:.25,max:100,valueLabelDisplay:"auto"}))}var q=a(120),$=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(l.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).color="#ffffffff",e.state={background:e.color},e.handleChangeComplete=function(t){e.setState({background:t.rgb})},e.handleChange=function(t,a){e.setState({background:t.rgb})},e}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement(q.ChromePicker,{color:this.state.background,onChange:this.handleChange,onChangeComplete:this.handleChangeComplete})}}]),a}(r.a.Component),z=a(121),G=a.n(z),Q=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).enableStrokeSlider=!1,n.enableOpacitySlider=!1,n.enableEraserSlider=!1,n.enableColorPalette=!1,n.lastColor=null,n.setLastColor=function(e){n.lastColor=e},n.getLastColor=function(){return n.lastColor},n.setLastOpacity=function(e){n.lastOpacity=e},n.getLastOpacity=function(){return n.lastOpacity},n.getLastEraserWidth=function(){return n.lastEraserWidth},n.getLastStrokeWidth=function(){return n.lastStrokeWidth},n.setLastEraserWidth=function(e){n.lastEraserWidth=e},n.setLastStrokeWidth=function(e){n.lastStrokeWidth=e},n.handleClick=function(e){n.node.contains(e.target)||n.handleClickOutside()},n.handleStrokeSlider=function(){n.enableStrokeSlider=!n.enableStrokeSlider,n.enableOpacitySlider=!1,n.enableEraserSlider=!1,n.enableColorPalette=!1,n.forceUpdate()},n.handleOpacitySlider=function(){n.enableOpacitySlider=!n.enableOpacitySlider,n.enableStrokeSlider=!1,n.enableEraserSlider=!1,n.enableColorPalette=!1,n.forceUpdate()},n.handleEraserSlider=function(){n.enableEraserSlider=!n.enableEraserSlider,n.enableStrokeSlider=!1,n.enableOpacitySlider=!1,n.enableColorPalette=!1,n.forceUpdate()},n.handleColorPalette=function(){n.enableStrokeSlider=!1,n.enableOpacitySlider=!1,n.enableEraserSlider=!1,n.enableColorPalette=!n.enableColorPalette,n.forceUpdate()},n.lastColor=e.loaderRef.getStrokeColor(),n.lastStrokeWidth=e.loaderRef.getStrokeWidth(),n.lastEraserWidth=e.loaderRef.getStrokeWidth(),n.lastOpacity=e.loaderRef.getOpacity(),n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"handleClickOutside",value:function(){this.enableStrokeSlider=!1,this.enableOpacitySlider=!1,this.enableEraserSlider=!1,this.enableColorPalette=!1,this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:t.root},r.a.createElement(b.a,{orientation:"vertical",color:"primary","aria-label":"vertical outlined primary button group",variant:"contained"},r.a.createElement(S.a,{title:"Pen",onClick:this.handleStrokeSlider},r.a.createElement(g.a,null)),r.a.createElement(S.a,{title:"Eraser",onClick:this.handleEraserSlider},r.a.createElement(R.a,null)),r.a.createElement(S.a,{title:"Opacity",onClick:this.handleOpacitySlider},r.a.createElement(L.a,null)),r.a.createElement(S.a,{title:"Color Palette",onClick:this.handleColorPalette},r.a.createElement(O.a,null)),r.a.createElement(S.a,{title:"Color Picker"},r.a.createElement(K.a,null)),r.a.createElement(S.a,{title:"Shapes"},r.a.createElement(V.a,null)),r.a.createElement(S.a,{title:"Clear Canvas"},r.a.createElement(j.a,null))),r.a.createElement("div",{className:G.a.slider,ref:function(t){return e.node=t}},this.enableStrokeSlider&&r.a.createElement(Y,{setLastColor:this.setLastColor,getLastColor:this.getLastColor,setLastStrokeWidth:this.setLastStrokeWidth,getLastStrokeWidth:this.getLastStrokeWidth,loader:this.props.loaderRef}),this.enableEraserSlider&&r.a.createElement(I,{setLastEraserWidth:this.setLastEraserWidth,getLastEraserWidth:this.getLastEraserWidth,loader:this.props.loaderRef}),this.enableOpacitySlider&&r.a.createElement(J,{setLastOpacity:this.setLastOpacity,getLastOpacity:this.getLastOpacity,loader:this.props.loaderRef}),this.enableColorPalette&&r.a.createElement($,{loader:this.props.loaderRef})))}}]),a}(r.a.Component),Z=Object(y.a)((function(e){return{root:{display:"flex","& > *":{margin:e.spacing(1)},width:"fit-content"}}}))(Q),_=1,ee=0,te=0,ae=new(function(){function e(){var t=this;return Object(l.a)(this,e),this.onMouseWheel=function(e){if(e.preventDefault(),e.ctrlKey){var a=e.clientX-t.canvas.offsetLeft,n=e.clientY-t.canvas.offsetTop,r=e.deltaY<0?1:-1,i=Math.exp(.2*r);t.skcanvas.translate(ee,te),ee-=a/(_*i)-a/_,te-=n/(_*i)-n/_,t.skcanvas.scale(i,i),t.skcanvas.translate(-ee,-te),_*=i}else ee+=e.deltaX/_,te+=e.deltaY/_,t.skcanvas.translate(-e.deltaX/_,-e.deltaY/_)},this.onMouseMove=function(e){if(e.buttons){var a=ee+e.offsetX/_,n=te+e.offsetY/_;if(t.hold)t.paths[t.paths.length-1].lineTo(a,n);else{var r=new t.canvasKit.SkPaint;r.setAntiAlias(!0);var i=t.strokeColor;r.setColor(t.canvasKit.Color(i.r,i.g,i.b,i.a)),r.setStyle(t.canvasKit.PaintStyle.Stroke),r.setStrokeWidth(t.strokeWidth),r.setPathEffect(t.canvasKit.SkPathEffect.MakeCorner(50)),t.paints.push(r);var o=new t.canvasKit.SkPath;t.paths.push(o),o.moveTo(a,n)}t.hold=!0}else t.hold=!1},this.drawFrame=function(){t.canvasKit.setCurrentContext(t.context);for(var e=0;e<t.paints.length&&e<t.paths.length;e++)t.skcanvas.drawPath(t.paths[e],t.paints[e]);t.skcanvas.flush(),requestAnimationFrame(t.drawFrame)},e.instance||(e.instance=this,this.canvasKit=null,this.paints=[],this.paths=[],this.hold=!1,this.path=null,this.strokeColor={r:0,g:0,b:0,a:1},this.strokeWidth=1),e.instance}return Object(s.a)(e,[{key:"Init",value:function(e,t){this.canvasKit=e,this.canvas=t,this.surface=this.canvasKit.MakeCanvasSurface(this.canvas.id),this.context=this.canvasKit.currentContext(),this.skcanvas=this.surface.getCanvas(),this.opacityVal=1,this.addListeners(),this.drawFrame()}},{key:"setOpacity",value:function(e){this.opacityVal=e}},{key:"getOpacity",value:function(){return this.opacityVal}},{key:"setStrokeWidth",value:function(e){this.strokeWidth=e}},{key:"getStrokeWidth",value:function(){return this.strokeWidth}},{key:"setStrokeColor",value:function(e){this.strokeColor=e}},{key:"getStrokeColor",value:function(){return this.strokeColor}},{key:"addListeners",value:function(){this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("wheel",this.onMouseWheel,!1)}}]),e}()),ne=new(function(){function e(){return Object(l.a)(this,e),e.instance||(e.instance=this),e.instance}return Object(s.a)(e,[{key:"initHtmlCanvas",value:function(e){e.height=window.screen.height,e.width=window.screen.width,e.style.cursor="crosshair"}},{key:"initCanvas",value:function(e,t){this.initHtmlCanvas(t),ae.Init(e,t)}},{key:"setOpacity",value:function(e){ae.setOpacity(e)}},{key:"getOpacity",value:function(){return ae.getOpacity()}},{key:"setStrokeWidth",value:function(e){ae.setStrokeWidth(e)}},{key:"getStrokeWidth",value:function(){return ae.getStrokeWidth()}},{key:"setStrokeColor",value:function(e){ae.setStrokeColor(e)}},{key:"getStrokeColor",value:function(){return ae.getStrokeColor()}}]),e}()),re=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"toolbar"},r.a.createElement(Z,{loaderRef:ne})),r.a.createElement("div",{className:"canvas"},r.a.createElement(m,{loaderRef:ne})))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(re,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[131,1,2]]]);
//# sourceMappingURL=main.fa53c0cd.chunk.js.map