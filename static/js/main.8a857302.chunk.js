(this.webpackJsonpcanvas=this.webpackJsonpcanvas||[]).push([[0],{127:function(e,t,a){e.exports=a(314)},132:function(e,t,a){},133:function(e,t,a){},144:function(e,t,a){},311:function(e,t,a){},314:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(27),i=a.n(o),s=(a(132),a(8)),l=a(9),c=a(22),u=a(20),h=(a(133),a(77)),d=a.n(h),v=a(116),f=a(135);function p(){return(p=Object(v.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){f().ready().then((function(t){e(t)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=function(){function e(){Object(s.a)(this,e),this.canvasKit=null,this.canvas=null,this.loader=null}return Object(l.a)(e,[{key:"loadCanvasKit",value:function(e,t){var a=this;this.canvas=e,this.loader=t,function(){return p.apply(this,arguments)}().then((function(e){a.canvasKit=e,a.loader.initCanvas(a.canvasKit,a.canvas)}))}}]),e}(),C=(a(144),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).canvasRef=r.a.createRef(),n.canvasModel=new k,n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.canvasRef.current;this.canvasModel.loadCanvasKit(e,this.props.loaderRef)}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("canvas",{className:"canvas",id:"canvas",ref:this.canvasRef}))}}]),a}(r.a.Component)),g=a(332),S=a(335),b=a(17),m=a(119),y=a.n(m),E=a(121),w=a.n(E),W=a(123),O=a.n(W),L=a(122),P=a.n(L),j=a(120),R=a.n(j),K=a(56),x=a(330),M=a(333),U=Object(x.a)({root:{height:"100%"}});function A(e){return"".concat(e)}function N(e){var t=U(),a=r.a.useState(e.getLastStrokeWidth()),n=Object(K.a)(a,2),o=n[0],i=n[1];return r.a.useEffect((function(){return e.loader.setStrokeColor(e.getLastColor()),e.loader.setStrokeWidth(e.getLastStrokeWidth()),function(){e.setLastColor(e.loader.getStrokeColor()),e.setLastStrokeWidth(e.loader.getStrokeWidth())}}),[e]),r.a.createElement("div",{className:t.root},r.a.createElement(M.a,{defaultValue:o,orientation:"vertical",value:"number"===typeof o?o:0,onChange:function(t,a){i(a),e.loader.setStrokeWidth(a)},"aria-labelledby":"vertical-slider",getAriaValueText:A,step:.25,min:.25,max:100,valueLabelDisplay:"auto"}))}var T=Object(x.a)({root:{height:"100%"}});function V(e){return"".concat(e)}function D(e){var t=T(),a=r.a.useState(e.getLastEraserWidth()),n=Object(K.a)(a,2),o=n[0],i=n[1],s={r:255,g:255,b:255,a:1};return r.a.useEffect((function(){return e.loader.setStrokeColor(s),e.loader.setStrokeWidth(e.getLastEraserWidth()),function(){e.setLastEraserWidth(e.loader.getStrokeWidth())}}),[e,s]),r.a.createElement("div",{className:t.root},r.a.createElement(M.a,{defaultValue:o,orientation:"vertical",value:"number"===typeof o?o:0,onChange:function(t,a){i(a),e.loader.setStrokeWidth(a)},"aria-labelledby":"vertical-slider",getAriaValueText:V,step:.25,min:.25,max:100,valueLabelDisplay:"auto"}))}var F=a(118),Y=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={background:e.props.getLastColor()},e.handleChangeComplete=function(t){e.props.setLastColor(t.rgb),e.props.loader.setStrokeColor(t.rgb),e.setState({background:t.rgb})},e.handleChange=function(t,a){e.setState({background:t.rgb})},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(F.ChromePicker,{color:this.state.background,onChange:this.handleChange,onChangeComplete:this.handleChangeComplete})}}]),a}(r.a.Component),J=(a(311),function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).enableStrokeSlider=!1,n.enableOpacitySlider=!1,n.enableEraserSlider=!1,n.enableColorPalette=!1,n.lastColor=null,n.setLastColor=function(e){n.lastColor=e},n.getLastColor=function(){return n.lastColor},n.setLastOpacity=function(e){n.lastOpacity=e},n.getLastOpacity=function(){return n.lastOpacity},n.getLastEraserWidth=function(){return n.lastEraserWidth},n.getLastStrokeWidth=function(){return n.lastStrokeWidth},n.setLastEraserWidth=function(e){n.lastEraserWidth=e},n.setLastStrokeWidth=function(e){n.lastStrokeWidth=e},n.handleClick=function(e){n.node.contains(e.target)||n.handleClickOutside()},n.handleStrokeSlider=function(){n.enableStrokeSlider=!n.enableStrokeSlider,n.enableOpacitySlider=!1,n.enableEraserSlider=!1,n.enableColorPalette=!1,n.forceUpdate()},n.handleOpacitySlider=function(){n.enableOpacitySlider=!n.enableOpacitySlider,n.enableStrokeSlider=!1,n.enableEraserSlider=!1,n.enableColorPalette=!1,n.forceUpdate()},n.handleEraserSlider=function(){n.enableEraserSlider=!n.enableEraserSlider,n.enableStrokeSlider=!1,n.enableOpacitySlider=!1,n.enableColorPalette=!1,n.forceUpdate()},n.handleColorPalette=function(){n.enableStrokeSlider=!1,n.enableOpacitySlider=!1,n.enableEraserSlider=!1,n.enableColorPalette=!n.enableColorPalette,n.forceUpdate()},n.handleClearCanvas=function(){n.props.loaderRef.clearCanvas()},n.handleUndo=function(){n.props.loaderRef.undo()},n.handleChange=function(e,t){"Pan"===t&&"Pan"!==n.state.view&&n.handleStartPan(),"Pan"!==t&&"Pan"===n.state.view&&n.handleEndPan(),"Color Palette"===t||"Clear Canvas"===t?n.setState({view:"Pen"}):null!==t&&n.setState({view:t})},n.handleStartPan=function(){n.props.loaderRef.startPan()},n.handleEndPan=function(){n.props.loaderRef.endPan()},n.state={view:"Pen"},n.lastColor=e.loaderRef.getStrokeColor(),n.lastStrokeWidth=e.loaderRef.getStrokeWidth(),n.lastEraserWidth=e.loaderRef.getStrokeWidth(),n.lastOpacity=e.loaderRef.getOpacity(),n}return Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentWillMount",value:function(){document.addEventListener("mousedown",this.handleClick,!1)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClick,!1)}},{key:"handleClickOutside",value:function(){this.enableStrokeSlider=!1,this.enableOpacitySlider=!1,this.enableEraserSlider=!1,this.enableColorPalette=!1,this.forceUpdate()}},{key:"render",value:function(){var e=this,t=this.props.classes;return r.a.createElement("div",{className:"rowC"},r.a.createElement("div",{className:t.root},r.a.createElement(S.a,{orientation:"vertical","aria-label":"vertical outlined primary button group",variant:"contained",value:this.state.view,exclusive:!0,onChange:this.handleChange},r.a.createElement(g.a,{title:"Pen",value:"Pen",onClick:this.handleStrokeSlider},r.a.createElement(y.a,null)),r.a.createElement(g.a,{title:"Eraser",value:"Eraser",onClick:this.handleEraserSlider},r.a.createElement(R.a,null)),r.a.createElement(g.a,{title:"Color Palette",value:"Color Palette",onClick:this.handleColorPalette},r.a.createElement(w.a,null)),r.a.createElement(g.a,{title:"Clear Canvas",value:"Clear Canvas",onClick:this.handleClearCanvas},r.a.createElement(P.a,null))),r.a.createElement(S.a,{orientation:"vertical","aria-label":"vertical outlined primary button group",variant:"contained"},r.a.createElement(g.a,{title:"Undo",onClick:this.handleUndo},r.a.createElement(O.a,null)))),r.a.createElement("div",{className:"sliderC",ref:function(t){return e.node=t}},this.enableStrokeSlider&&r.a.createElement(N,{setLastColor:this.setLastColor,getLastColor:this.getLastColor,setLastStrokeWidth:this.setLastStrokeWidth,getLastStrokeWidth:this.getLastStrokeWidth,loader:this.props.loaderRef}),this.enableEraserSlider&&r.a.createElement(D,{setLastEraserWidth:this.setLastEraserWidth,getLastEraserWidth:this.getLastEraserWidth,loader:this.props.loaderRef}),this.enableColorPalette&&r.a.createElement(Y,{setLastColor:this.setLastColor,getLastColor:this.getLastColor,loader:this.props.loaderRef})))}}]),a}(r.a.Component)),X=Object(b.a)((function(e){return{root:{display:"flex",flexDirection:"column","& > *":{margin:e.spacing(1)},width:"fit-content"}}}))(J),I=1,B=0,H=0,q=new(function(){function e(){var t=this;return Object(s.a)(this,e),this.onMouseWheel=function(e){if(e.preventDefault(),e.ctrlKey){var a=e.clientX-t.canvas.offsetLeft,n=e.clientY-t.canvas.offsetTop,r=e.deltaY<0?1:-1,o=Math.exp(.2*r);t.skcanvas.translate(B,H),B-=a/(I*o)-a/I,H-=n/(I*o)-n/I,t.skcanvas.scale(o,o),t.skcanvas.translate(-B,-H),I*=o}else B+=e.deltaX/I,H+=e.deltaY/I,t.skcanvas.translate(-e.deltaX/I,-e.deltaY/I)},this.doPan=function(e){},this.onMouseMove=function(e){if(e.buttons)if(t.panning)t.doPan(e);else{var a=B+e.offsetX/I,n=H+e.offsetY/I;if(t.hold)t.paths[t.paths.length-1].lineTo(a,n);else{var r=new t.canvasKit.SkPaint;r.setAntiAlias(!0);var o=t.strokeColor;r.setColor(t.canvasKit.Color(o.r,o.g,o.b,o.a)),r.setStyle(t.canvasKit.PaintStyle.Stroke),r.setStrokeCap(t.canvasKit.StrokeCap.Round),r.setStrokeJoin(t.canvasKit.StrokeJoin.Round),r.setStrokeWidth(t.strokeWidth),r.setPathEffect(t.canvasKit.SkPathEffect.MakeCorner(50)),t.paints.push(r);var i=new t.canvasKit.SkPath;t.paths.push(i),i.moveTo(a,n)}t.hold=!0}else t.hold=!1},this.drawFrame=function(){t.canvasKit.setCurrentContext(t.context),t.skcanvas.clear({r:255,g:255,b:255,a:1});for(var e=0;e<t.paints.length&&e<t.paths.length;e++)t.skcanvas.drawPath(t.paths[e],t.paints[e]);t.skcanvas.flush(),requestAnimationFrame(t.drawFrame)},e.instance||(e.instance=this,this.canvasKit=null,this.paints=[],this.paths=[],this.hold=!1,this.path=null,this.strokeColor={r:0,g:0,b:0,a:1},this.strokeWidth=1,this.panning=!1),e.instance}return Object(l.a)(e,[{key:"Init",value:function(e,t){this.canvasKit=e,this.canvas=t,this.surface=this.canvasKit.MakeCanvasSurface(this.canvas.id),this.context=this.canvasKit.currentContext(),this.skcanvas=this.surface.getCanvas(),this.opacityVal=1,this.addListeners(),this.drawFrame()}},{key:"setOpacity",value:function(e){this.opacityVal=e}},{key:"getOpacity",value:function(){return this.opacityVal}},{key:"setStrokeWidth",value:function(e){this.strokeWidth=e}},{key:"getStrokeWidth",value:function(){return this.strokeWidth}},{key:"setStrokeColor",value:function(e){this.strokeColor=e}},{key:"getStrokeColor",value:function(){return this.strokeColor}},{key:"addListeners",value:function(){this.canvas.addEventListener("mousemove",this.onMouseMove),this.canvas.addEventListener("wheel",this.onMouseWheel,!1)}},{key:"clearCanvas",value:function(){this.paths=[],this.paints=[],this.drawFrame()}},{key:"undo",value:function(){this.paths.length&&this.paths.pop(),this.paints.length&&this.paints.pop()}},{key:"startPan",value:function(){this.panning=!0}},{key:"endPan",value:function(){this.panning=!1}}]),e}()),$=new(function(){function e(){return Object(s.a)(this,e),e.instance||(e.instance=this,this.canvas=null),e.instance}return Object(l.a)(e,[{key:"initHtmlCanvas",value:function(e){e.height=window.screen.height,e.width=window.screen.width,e.style.cursor="crosshair",this.canvas=e}},{key:"initCanvas",value:function(e,t){this.initHtmlCanvas(t),q.Init(e,t)}},{key:"setOpacity",value:function(e){q.setOpacity(e)}},{key:"getOpacity",value:function(){return q.getOpacity()}},{key:"setStrokeWidth",value:function(e){q.setStrokeWidth(e)}},{key:"getStrokeWidth",value:function(){return q.getStrokeWidth()}},{key:"setStrokeColor",value:function(e){q.setStrokeColor(e)}},{key:"getStrokeColor",value:function(){return q.getStrokeColor()}},{key:"clearCanvas",value:function(){q.clearCanvas()}},{key:"undo",value:function(){q.undo()}},{key:"startPan",value:function(){this.canvas.style.cursor="grab",q.startPan()}},{key:"endPan",value:function(){this.canvas.style.cursor="crosshair",q.endPan()}}]),e}()),z=function(e){Object(c.a)(a,e);var t=Object(u.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"toolbar"},r.a.createElement(X,{loaderRef:$})),r.a.createElement("div",{className:"canvas"},r.a.createElement(C,{loaderRef:$})))}}]),a}(r.a.Component),G=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Q(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(z,null)),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/canvas",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/canvas","/service-worker.js");G?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Q(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Q(t,e)}))}}()}},[[127,1,2]]]);
//# sourceMappingURL=main.8a857302.chunk.js.map