{"version":3,"sources":["core/WasmLoader.js","canvas/CanvasModel.js","canvas/Canvas.js","tool/customView/StrokeSliderView.js","tool/customView/EraserSliderView.js","tool/customView/OpacitySliderView.js","tool/customView/ColorPickerView.js","tool/Toolbar.js","core/Controller.js","core/Loader.js","App.js","serviceWorker.js","index.js"],"names":["CanvasKitInit","require","a","Promise","resolve","reject","ready","then","CanvasKit","CanvasModel","this","canvasKit","canvas","loader","loadWasm","initCanvas","Canvas","props","canvasRef","React","createRef","canvasModel","current","loadCanvasKit","loaderRef","className","id","ref","Component","useStyles","makeStyles","root","height","valuetext","value","StrokeSliderView","classes","useState","getLastStrokeWidth","setValue","useEffect","setStrokeColor","getLastColor","setStrokeWidth","setLastColor","getStrokeColor","setLastStrokeWidth","getStrokeWidth","Slider","defaultValue","orientation","onChange","event","newValue","aria-labelledby","getAriaValueText","step","min","max","valueLabelDisplay","EraserSliderView","getLastEraserWidth","whiteColor","setLastEraserWidth","OpacitySliderView","getLastOpacity","setOpacity","getOpacity","ColorPickerView","color","state","background","handleChangeComplete","setState","rgb","handleChange","onChangeComplete","Toolbar","enableStrokeSlider","enableOpacitySlider","enableEraserSlider","enableColorPalette","lastColor","val","setLastOpacity","lastOpacity","lastEraserWidth","lastStrokeWidth","handleClick","e","node","contains","target","handleClickOutside","handleStrokeSlider","forceUpdate","handleOpacitySlider","handleEraserSlider","handleColorPalette","document","addEventListener","removeEventListener","ButtonGroup","aria-label","variant","Button","title","onClick","styles","slider","withStyles","theme","display","margin","spacing","width","scale","originx","originy","onMouseWheel","preventDefault","ctrlKey","mousex","clientX","offsetLeft","mousey","clientY","offsetTop","wheel","deltaY","zoom","Math","exp","skcanvas","translate","deltaX","onMouseMove","buttons","offsetX","offsetY","hold","paths","length","lineTo","paint","SkPaint","setAntiAlias","clr","strokeColor","setColor","Color","r","g","b","setStyle","PaintStyle","Stroke","strokeWidth","setPathEffect","SkPathEffect","MakeCorner","paints","push","path","SkPath","moveTo","drawFrame","setCurrentContext","context","i","drawPath","flush","requestAnimationFrame","Controller","instance","canvaskit","surface","MakeCanvasSurface","currentContext","getCanvas","opacityVal","addListeners","Loader","window","screen","style","cursor","initHtmlCanvas","Init","App","Boolean","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","registration","unregister","catch","error","console","message"],"mappings":"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","file":"static/js/main.fa53c0cd.chunk.js","sourcesContent":["const CanvasKitInit = require('canvaskit-wasm/bin/canvaskit.js')\n\nexport default async function loadWasm(){\n    return new Promise((resolve, reject) => {\n        CanvasKitInit().ready().then((CanvasKit) => {\n            resolve(CanvasKit);\n        });\n    });\n}\n","import loadWasm from '../core/WasmLoader'\nexport class CanvasModel {\n    constructor() {\n        this.canvasKit = null;\n        this.canvas = null;\n        this.loader = null;\n    }\n\n    loadCanvasKit(canvas, loader){\n        this.canvas = canvas;\n        this.loader = loader;\n        loadWasm().then((CanvasKit) => {\n            this.canvasKit = CanvasKit;\n            this.loader.initCanvas(this.canvasKit, this.canvas);\n        });\n    }\n}","import React from 'react';\nimport {CanvasModel} from './CanvasModel';\nimport './Canvas.css'\n\nexport default class Canvas extends React.Component {\n    constructor(props) {\n        super(props);\n        this.canvasRef = React.createRef();\n        this.canvasModel = new CanvasModel();\n    }\n\n    componentDidMount() {\n        const canvas = this.canvasRef.current\n        this.canvasModel.loadCanvasKit(canvas, this.props.loaderRef);\n    }\n\n    render(){\n        return <div>\n        <canvas className=\"canvas\" id=\"canvas\" ref={this.canvasRef} />\n        </div>\n    }\n}","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Slider from '@material-ui/core/Slider';\n\nconst useStyles = makeStyles({\n  root: {\n    height: 250,\n  },\n});\n\nfunction valuetext(value) {\n  return `${value}`;\n}\n\nexport default function StrokeSliderView(props) {\n  const classes = useStyles();\n  const [value, setValue] = React.useState(props.getLastStrokeWidth());\n  const handleSliderChange = (event, newValue) => {\n    setValue(newValue);\n    props.loader.setStrokeWidth(newValue);\n  };\n\n  React.useEffect(function() {\n    props.loader.setStrokeColor(props.getLastColor());\n    props.loader.setStrokeWidth(props.getLastStrokeWidth());\n    return function cleanup() {\n      props.setLastColor(props.loader.getStrokeColor());\n      props.setLastStrokeWidth(props.loader.getStrokeWidth());\n    }\n  }, [props]);\n\n  return (\n    <div className={classes.root}>\n        <Slider\n        defaultValue={value}\n        orientation=\"vertical\"\n        value={typeof value === 'number' ? value : 0}\n        onChange={handleSliderChange}\n        aria-labelledby=\"vertical-slider\"\n        getAriaValueText={valuetext}\n        step={0.25}\n        min={0.25}\n        max={100}\n        valueLabelDisplay=\"auto\"\n        />\n    </div>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Slider from '@material-ui/core/Slider';\n\nconst useStyles = makeStyles({\n  root: {\n    height: 250,\n  },\n});\n\nfunction valuetext(value) {\n  return `${value}`;\n}\n\nexport default function EraserSliderView(props) {\n  const classes = useStyles();\n  const [value, setValue] = React.useState(props.getLastEraserWidth());\n  const whiteColor = {'r':255,'g':255,'b':255,'a':1};\n  const handleSliderChange = (event, newValue) => {\n    setValue(newValue);\n    props.loader.setStrokeWidth(newValue);\n  };\n\n  React.useEffect(function() {\n    props.loader.setStrokeColor(whiteColor);\n    props.loader.setStrokeWidth(props.getLastEraserWidth());\n    return function cleanup() {\n      props.setLastEraserWidth(props.loader.getStrokeWidth());\n    }\n  }, [props, whiteColor]);\n\n  return (\n    <div className={classes.root}>\n        <Slider\n        defaultValue={value}\n        orientation=\"vertical\"\n        value={typeof value === 'number' ? value : 0}\n        onChange={handleSliderChange}\n        aria-labelledby=\"vertical-slider\"\n        getAriaValueText={valuetext}\n        step={0.25}\n        min={0.25}\n        max={100}\n        valueLabelDisplay=\"auto\"\n        />\n    </div>\n  );\n}\n","import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Slider from '@material-ui/core/Slider';\n\nconst useStyles = makeStyles({\n  root: {\n    height: 250,\n  },\n});\n\nfunction valuetext(value) {\n  return `${value}`;\n}\n\nexport default function OpacitySliderView(props) {\n  const classes = useStyles();\n  const [value, setValue] = React.useState(props.getLastOpacity());\n\n  const handleSliderChange = (event, newValue) => {\n    setValue(newValue);\n    props.loader.setOpacity(newValue);\n  };\n\n  React.useEffect(function() {\n    props.loader.setOpacity(props.getLastOpacity());\n    return function cleanup() {\n      props.getLastOpacity(props.loader.getOpacity());\n    }\n  }, [props]);\n\n  return (\n    <div className={classes.root}>\n        <Slider\n        defaultValue={value}\n        orientation=\"vertical\"\n        value={typeof value === 'number' ? value : 0}\n        onChange={handleSliderChange}\n        aria-labelledby=\"vertical-slider\"\n        getAriaValueText={valuetext}\n        step={0.25}\n        min={0.25}\n        max={100}\n        valueLabelDisplay=\"auto\"\n        />\n    </div>\n  );\n}\n","import React from 'react';\nimport { ChromePicker } from 'react-color';\n\nexport default class ColorPickerView extends React.Component {\n    color = \"#ffffffff\";//value.rgb;  \n    state = {\n        background: this.color,\n    };\n    handleChangeComplete = (color) => {\n        this.setState({ background: color.rgb });\n    };\n    handleChange = (color, event) => {\n        this.setState({ background: color.rgb });\n    };\n    render() {\n        return <ChromePicker \n            color={ this.state.background }\n            onChange={ this.handleChange }\n            onChangeComplete={ this.handleChangeComplete }\n        />;\n    }\n}","import React from 'react';\n// import { observable, computed, action, decorate } from \"mobx\";\nimport Button from '@material-ui/core/Button';\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\nimport { withStyles } from '@material-ui/core/styles';\nimport CreateIcon from '@material-ui/icons/Create';\nimport PaletteIcon from '@material-ui/icons/Palette';\nimport OpacityIcon from '@material-ui/icons/Opacity';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport ColorizeIcon from '@material-ui/icons/Colorize';\nimport Eraser from 'mdi-material-ui/Eraser';\nimport Shape from 'mdi-material-ui/Shape';\nimport StrokeSliderView from './customView/StrokeSliderView';\nimport EraserSliderView from './customView/EraserSliderView';\nimport OpacitySliderView from './customView/OpacitySliderView';\nimport ColorPickerView from './customView/ColorPickerView';\nimport styles from './Toolbar.css'\n\nconst uiStyles = (theme) => ({\n    root: {\n      display: 'flex',\n      '& > *': {\n        margin: theme.spacing(1),\n      },\n      width: \"fit-content\",\n    },\n});\n\nclass Toolbar extends React.Component {\n    enableStrokeSlider = false;\n    enableOpacitySlider = false;\n    enableEraserSlider = false;\n    enableColorPalette = false;\n    lastColor = null;\n\n    constructor(props) {\n        super(props);\n        this.lastColor = props.loaderRef.getStrokeColor();\n        this.lastStrokeWidth = props.loaderRef.getStrokeWidth();\n        this.lastEraserWidth = props.loaderRef.getStrokeWidth();\n        this.lastOpacity = props.loaderRef.getOpacity();\n    }\n\n    setLastColor = (val) => {\n        this.lastColor = val;\n    }\n\n    getLastColor = () => {\n        return this.lastColor;\n    }\n\n    setLastOpacity = (val) => {\n        this.lastOpacity = val;\n    }\n\n    getLastOpacity = () => {\n        return this.lastOpacity;\n    }\n    getLastEraserWidth = () =>{\n        return this.lastEraserWidth;\n    }\n    getLastStrokeWidth = () =>{\n        return this.lastStrokeWidth;\n    }\n    setLastEraserWidth = (val) =>{\n        this.lastEraserWidth = val;\n    }\n    setLastStrokeWidth = (val) =>{\n        this.lastStrokeWidth = val;\n    }\n\n    componentDidMount() {\n    }\n\n    componentWillMount() {\n        document.addEventListener(\"mousedown\", this.handleClick, false);\n    }\n\n    componentWillUnmount() {\n        document.removeEventListener(\"mousedown\", this.handleClick, false);\n    }\n\n    handleClick = (e) => {\n        if(this.node.contains(e.target)){\n            return;\n        }\n        this.handleClickOutside();\n    }\n\n    handleClickOutside() {\n        this.enableStrokeSlider = false;\n        this.enableOpacitySlider = false;\n        this.enableEraserSlider = false;\n        this.enableColorPalette = false;\n        this.forceUpdate();\n    }\n\n    handleStrokeSlider = () => {\n        this.enableStrokeSlider = !this.enableStrokeSlider;\n        this.enableOpacitySlider = false;\n        this.enableEraserSlider = false;\n        this.enableColorPalette = false;\n        this.forceUpdate();\n    }\n    handleOpacitySlider = () => {\n        this.enableOpacitySlider = !this.enableOpacitySlider;\n        this.enableStrokeSlider = false;\n        this.enableEraserSlider = false;\n        this.enableColorPalette = false;\n        this.forceUpdate();\n    }\n    handleEraserSlider = () => {\n        this.enableEraserSlider = !this.enableEraserSlider;\n        this.enableStrokeSlider = false;\n        this.enableOpacitySlider = false;\n        this.enableColorPalette = false;\n        this.forceUpdate();\n    }\n    handleColorPalette = () => {\n        this.enableStrokeSlider = false;\n        this.enableOpacitySlider = false;\n        this.enableEraserSlider = false;\n        this.enableColorPalette = !this.enableColorPalette;\n        this.forceUpdate();\n    }\n    \n    render(){\n        const { classes } = this.props;\n        return <div className={classes.root}>\n            <ButtonGroup\n                orientation=\"vertical\"\n                color=\"primary\"\n                aria-label=\"vertical outlined primary button group\"\n                variant=\"contained\"\n            >\n                <Button title=\"Pen\" onClick={this.handleStrokeSlider}><CreateIcon/></Button>\n                <Button title=\"Eraser\" onClick={this.handleEraserSlider}><Eraser/></Button>\n                <Button title=\"Opacity\" onClick={this.handleOpacitySlider}><OpacityIcon/></Button>\n                <Button title=\"Color Palette\" onClick={this.handleColorPalette}><PaletteIcon/></Button>\n                <Button title=\"Color Picker\"><ColorizeIcon/></Button>\n                <Button title=\"Shapes\"><Shape/></Button>\n                <Button title=\"Clear Canvas\"><DeleteIcon/></Button>\n            </ButtonGroup>\n            <div className={styles.slider} ref = {node => this.node = node}>\n            {this.enableStrokeSlider && <StrokeSliderView \n                                            setLastColor = {this.setLastColor} \n                                            getLastColor = {this.getLastColor}\n                                            setLastStrokeWidth = {this.setLastStrokeWidth}\n                                            getLastStrokeWidth = {this.getLastStrokeWidth}\n                                            loader = {this.props.loaderRef}\n                                        />}\n            {this.enableEraserSlider && <EraserSliderView \n                                            setLastEraserWidth = {this.setLastEraserWidth}\n                                            getLastEraserWidth = {this.getLastEraserWidth}\n                                            loader={this.props.loaderRef}\n                                        />}\n            {this.enableOpacitySlider && <OpacitySliderView \n                                            setLastOpacity = {this.setLastOpacity}\n                                            getLastOpacity = {this.getLastOpacity}\n                                            loader={this.props.loaderRef}\n                                        />}\n            {this.enableColorPalette && <ColorPickerView loader={this.props.loaderRef}/>}\n            </div>\n        </div>\n    }\n}\n\nexport default withStyles(uiStyles)(Toolbar);","\nlet zoomIntensity = 0.2;\nlet scale = 1;\nlet originx = 0;\nlet originy = 0;\n\nclass Controller {\n    constructor(){\n        if (!Controller.instance){\n            Controller.instance = this;\n            this.canvasKit = null;\n            this.paints = [];\n            this.paths = [];\n            this.hold = false;\n            this.path = null;\n            this.strokeColor = {'r':0,'g':0,'b':0,'a':1};\n            this.strokeWidth = 1;\n        }\n        return Controller.instance;\n    }\n\n    Init(canvaskit, canvas){\n        this.canvasKit = canvaskit;\n        this.canvas = canvas\n        this.surface = this.canvasKit.MakeCanvasSurface(this.canvas.id);\n        this.context = this.canvasKit.currentContext();\n        this.skcanvas = this.surface.getCanvas();\n        this.opacityVal = 1;\n        this.addListeners();\n        this.drawFrame();\n    }\n\n    setOpacity(val){\n        this.opacityVal = val;\n    }\n\n    getOpacity(){\n        return this.opacityVal;\n    }\n\n    setStrokeWidth(val){\n        this.strokeWidth = val;\n    }\n\n    getStrokeWidth(){\n        return this.strokeWidth;\n    }\n\n    setStrokeColor(val){\n        this.strokeColor = val;\n    }\n\n    getStrokeColor(){\n        return this.strokeColor;\n    }\n    addListeners(){\n        this.canvas.addEventListener('mousemove', this.onMouseMove);\n        this.canvas.addEventListener('wheel', this.onMouseWheel, false);\n    }\n\n    onMouseWheel = (e) => {\n        e.preventDefault();\n        if (e.ctrlKey) {\n            // Get mouse offset.\n            let mousex = e.clientX - this.canvas.offsetLeft;\n            let mousey = e.clientY - this.canvas.offsetTop;\n            // Normalize wheel to +1 or -1.\n            let wheel = e.deltaY < 0 ? 1 : -1;\n\n            // Compute zoom factor.\n            let zoom = Math.exp(wheel*zoomIntensity);\n            \n            // Translate so the visible origin is at the context's origin.\n            this.skcanvas.translate(originx, originy);\n        \n            // Compute the new visible origin. Originally the mouse is at a\n            // distance mouse/scale from the corner, we want the point under\n            // the mouse to remain in the same place after the zoom, but this\n            // is at mouse/new_scale away from the corner. Therefore we need to\n            // shift the origin (coordinates of the corner) to account for this.\n            originx -= mousex/(scale*zoom) - mousex/scale;\n            originy -= mousey/(scale*zoom) - mousey/scale;\n            \n            // Scale it (centered around the origin due to the trasnslate above).\n            this.skcanvas.scale(zoom, zoom);\n            // Offset the visible origin to it's proper position.\n            this.skcanvas.translate(-originx, -originy);\n\n            // Update scale and others.\n            scale *= zoom;\n           // visibleWidth = width / scale;\n           // visibleHeight = height / scale;\n        } else {\n        // Your trackpad X and Y positions\n            originx += e.deltaX/scale;\n            originy += e.deltaY/scale;\n            this.skcanvas.translate(-e.deltaX/scale, -e.deltaY/scale);\n        }\n    }\n    \n    onMouseMove = (e) => {\n        if (!e.buttons) {\n            this.hold = false;\n            return;\n        }\n        let mousex = originx + e.offsetX/scale;\n        let mousey = originy + e.offsetY/scale;\n        if (this.hold) {\n            this.paths[this.paths.length - 1].lineTo(mousex, mousey);\n        } else {\n            let paint = new this.canvasKit.SkPaint();\n            paint.setAntiAlias(true);\n            let clr = this.strokeColor;\n            paint.setColor(this.canvasKit.Color(clr.r, clr.g, clr.b, clr.a));\n            paint.setStyle(this.canvasKit.PaintStyle.Stroke);\n            paint.setStrokeWidth(this.strokeWidth);\n            paint.setPathEffect(this.canvasKit.SkPathEffect.MakeCorner(50));\n            this.paints.push(paint);\n            let path = new this.canvasKit.SkPath();\n            this.paths.push(path);\n            path.moveTo(mousex, mousey);\n        }\n        this.hold = true;\n    }\n\n    drawFrame = ()=>{\n        this.canvasKit.setCurrentContext(this.context);\n        for (let i = 0; i < this.paints.length && i < this.paths.length; i++) {\n            this.skcanvas.drawPath(this.paths[i], this.paints[i]);\n        }\n        this.skcanvas.flush();\n        requestAnimationFrame(this.drawFrame);\n    }\n\n}\nexport default new Controller();","import Controller from './Controller';\nclass Loader {\n    constructor(){\n        if (!Loader.instance){\n            Loader.instance = this;\n        }\n        return Loader.instance;\n    }\n    initHtmlCanvas(canvas){\n        canvas.height = window.screen.height;\n        canvas.width = window.screen.width;\n        canvas.style.cursor = \"crosshair\";\n    }\n\n    initCanvas(CanvasKit, canvas){\n        this.initHtmlCanvas(canvas);\n        Controller.Init(CanvasKit, canvas);\n    }\n\n    setOpacity(val){\n        Controller.setOpacity(val);\n    }\n\n    getOpacity(){\n        return Controller.getOpacity();\n    }\n\n    setStrokeWidth(val){\n        Controller.setStrokeWidth(val);\n    }\n\n    getStrokeWidth(){\n        return Controller.getStrokeWidth();\n    }\n\n    setStrokeColor(val){\n        Controller.setStrokeColor(val);\n    }\n\n    getStrokeColor(){\n        return Controller.getStrokeColor();\n    }\n    \n}\n\nexport let loader = new Loader();","import React from 'react';\nimport './App.css';\nimport Canvas from \"./canvas/Canvas\";\nimport Toolbar from \"./tool/Toolbar\";\nimport {loader} from './core/Loader';\n\nexport default class App extends React.Component{\n\n  render() {\n    return <div>\n      <div className='toolbar'>\n      <Toolbar loaderRef={loader}/>\n      </div>\n      <div className='canvas'>\n      <Canvas loaderRef={loader}/>\n      </div>\n    </div>\n  };\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}